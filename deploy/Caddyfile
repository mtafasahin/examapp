{
	# Email is optional but recommended for Let's Encrypt
	# email {$LETSENCRYPT_EMAIL}
}

{$DOMAIN} {
	encode gzip

	# Keycloak must be reachable on the public domain for OIDC flows.
	# Serve it directly from Caddy (bypassing Ocelot) for common Keycloak paths.
	@keycloak path /realms /realms/* /resources /resources/* /admin /admin/* /js /js/* /robots.txt
	reverse_proxy @keycloak keycloak:8080

	# Single entry-point: forward everything to Ocelot gateway
	reverse_proxy ocelot-gateway:5678
}
