<div class="search-container">    
    <mat-form-field appearance="outline" class="search-box">
        <mat-label>Ara</mat-label>
        <input matInput [formControl]="searchControl" [matAutocomplete]="auto" (keyup.enter)="onEnter()">
        <mat-autocomplete #auto="matAutocomplete">
            <mat-option *ngFor="let worksheet of filteredWorksheets" [value]="worksheet.name" (onSelectionChange)="onAutocompleteSelect(worksheet.name)">
                <div class="search-item">
                  <!-- <img [src]="worksheet.imageUrl" alt="" class="search-img" /> -->
                  <!-- <app-worksheet-card [size]="'25px'" [test]="worksheet"> </app-worksheet-card> -->
                <span>{{ worksheet.name }} - {{ worksheet.subtitle }} - {{ worksheet.description }}</span>
                </div>
            </mat-option>
        </mat-autocomplete>
    </mat-form-field>
</div>

  <app-section-header class="section-container" title="Senin İçin Yeni Testler" icon="/icons/18.svg"></app-section-header>
    <div class="list-container">
      
        <button class="nav-btn left" (click)="handleLeftNavigation()">❮</button>
        <div class="cards" #cardContainer>
          <ul class="psds-carousel__track">
            <li class="psds-carousel__item" class="m-5" style="flex-basis: 377.305px;" *ngFor="let worksheet of pagedWorksheets.items">
              <app-worksheet-card
                [test]="worksheet" (cardClick)="onCardClick(worksheet.id || 0)">
            </app-worksheet-card>
            </li>
          </ul>
        
      </div>
      <button class="nav-btn right" (click)="handleRightNavigation()">❯</button>
    </div>

    <app-section-header class="section-container" title="Tamamlanmış Testler" icon="/icons/2.svg"></app-section-header>

    <div class="list-container">
      <div class="search-results">
        <h2>Showing search results for: <strong>{{ searchQuery }}</strong></h2>
      
        <!-- <div class="filters-container">
          <div class="filters">
            <h3>Filters (1)</h3>
            <button class="clear-btn" (click)="toggleRetiredResults()">Clear all</button>
      
            <div class="filter-category">
              <h4>Category</h4>
              <ul>
                

                  <li *ngFor="let category of filters.category" class="search-result-item">
                      <label class="check-box-container filter-checkbox">
                        <input type="checkbox" class="checkbox-input" [value]="category.name">
                        <span class="check-box-container checkbox-span"></span>
                        <span  class="check-box-form-label">{{category.name}} ({{category.count}})</span>
                      </label>
                    </li>

                
              </ul>
            </div>
      
            <div class="filter-topic">
              <h4>Topic</h4>
              <ul>
                <li *ngFor="let topic of filters.topics">
                  <input type="checkbox" [(ngModel)]="topic.selected" />
                  <label>{{ topic.name }} ({{ topic.count }})</label>
                </li>
              </ul>
            </div>
          </div>
      
          <div class="results-header">
            <h3>{{ totalResults }} Results</h3>
            <label>
              Show {{ showRetiredResults ? 'active' : 'retired' }} results
              <input type="checkbox" [(ngModel)]="showRetiredResults" />
            </label>
            <select [(ngModel)]="selectedSort">
              <option *ngFor="let option of sortOptions">{{ option }}</option>
            </select>
          </div>
        </div> -->
      
        <ul class="course-list">
          <li *ngFor="let course of pagedWorksheets.items" class="course-item">
            <div class="course-info">
              <h3>
                {{ course.name }}
                <span class="new-badge">NEW & POPULAR</span>
                <span class="new-badge"><strong>{{ course.questionCount }} Soru</strong></span>
              </h3>
              <p>By {{ course.subtitle }}</p>
              <p>{{ course.description }}</p>
              <p> • {{ course.gradeId }}.Sınıf</p>
              <p> •  ⭐  {{ 4.8 }}  •  {{ course.maxDurationSeconds/60 }}m</p>
              <!-- <ul class="course-topics">
                <li *ngFor="let topic of course.topics">
                  <span>▶ {{ topic.title }} - {{ topic.duration }}</span>
                </li>
              </ul> -->
            </div>
          </li>
        </ul>
      </div>
  
</div>

<div class="list-container">       
    @if (completedTestWorksheets.length > 0) {
        <button class="nav-btn left" (click)="handleLeftNavigation()">❮</button>
    <div class="cards" #cardContainer2>
    <app-completed-worksheet-card *ngFor="let cws of completedTestWorksheets"
      [completedTest]="cws">
    </app-completed-worksheet-card>
  </div>
  <button class="nav-btn right" (click)="handleRightNavigation()">❯</button>
    } @else {
        <p> Henüz bir test tamamlanadınız! </p>
    }    
    
</div>


