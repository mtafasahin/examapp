<div class="container" [ngClass]="selectionMode()">
    <input type="file" (change)="handleFilesInput2($event)" multiple accept="image/*">
    <button mat-raised-button color="primary" (click)="toggleSelectionMode('passage')">ğŸ“œ Passage SeÃ§</button>
    <button mat-raised-button color="primary" (click)="toggleSelectionMode('question')">Soru SeÃ§</button>
    <button mat-raised-button color="primary" (click)="lockSelectionMode('answer')">Disable Modes</button>
    <button mat-raised-button color="primary" (click)="toggleAlignMode()">HizalamayÄ± {{!autoAlign() ? 'AÃ§' : 'Kapat'}}</button>
    <!-- <button mat-raised-button color="primary" (click)="toggleSelectionMode('answer')" [disabled]="regions().length === 0">ÅÄ±k SeÃ§</button> -->
    <button mat-raised-button color="primary" (click)="downloadRegionsLite()" [disabled]="regions().length === 0">KoordinatlarÄ± Ä°ndir</button>
    <button mat-raised-button color="primary" (click)="predict()">Predict</button>
    <button mat-raised-button color="primary" (click)="sendToFix()">Sent To Fix</button>
    <button mat-raised-button color="primary" (click)="sendToFixForAnswer()">Sent To Fix For Answer</button>
    <button mat-raised-button color="primary" (click)="nextImage()">Next Image</button>
    
    <div *ngIf="imageSrc()" class="canvas-container">
      <canvas #canvas (mousedown)="startSelection($event)" (mousemove)="onMouseMove($event)" (mouseup)="endSelection($event)"></canvas>
    </div>
  
    <div class="regions-list">
      <h3>SeÃ§ilen BÃ¶lgeler:</h3>
      <ul class="regions">
        <li *ngFor="let region of regions(); let i = index">
          {{ region.name }} 
          <!-- - X: {{ region.x }}, Y: {{ region.y }}, G: {{ region.width }}, Y: {{ region.height }} -->
          <!-- âœ… Ã–rnek soru checkbox -->
            <label>
                <input type="checkbox" [checked]="isExample(region.name)" (change)="toggleExampleMode(region.name)"> Ã–rnek Soru
            </label>
             
          <!-- ğŸ“ Quill EditÃ¶rÃ¼ (Sadece Ã–rnek Soru SeÃ§iliyse AÃ§Ä±lacak) -->
            <quill-editor *ngIf="isExample(region.name)" [ngModel]="exampleAnswers.get(region.name)" (ngModelChange)="onTextChanged(region.name, $event)">
            </quill-editor>
          <ul>
            <li *ngFor="let answer of region.answers; let j = index">              
              <!-- - X: {{ answer.x }}, Y: {{ answer.y }}, G: {{ answer.width }}, Y: {{ answer.height }}               -->
              <button class="choice-btn" (click)="setCorrectAnswer(i, j)">
                {{ answer.label }}  {{ answer.isCorrect ? "âœ…" : "" }}
              </button>          
              <button (click)="removeAnswer(i, j)">âŒ Sil</button>
            </li>
          </ul>
          <!-- ğŸ”¹ Yeni Hizalama Butonu -->
            <button (click)="alignAnswers(i)" [disabled]="region.answers.length < 2">ğŸ”„ ÅÄ±klarÄ± Hizala</button>

            <button  (click)="removeQuestion(i)">âŒ Soruyu Sil</button>
             <button (click)="selectQuestion(i)" [disabled]="isExample(region.name)">ÅÄ±klarÄ± SeÃ§</button>

             <ng-container>
                  <!-- <label for="passageSelect">Passage SeÃ§:</label> -->
                  <select id="passageSelect" class="passage-select" (change)="onPassageChange($event, region.name)">
                    <option value="0" [selected]="!selectedPassageMap.has(region.name)">ğŸ”¹ Passage SeÃ§iniz</option>
                    <option *ngFor="let passage of passages()" [value]="passage.id" [selected]="selectedPassageMap.get(region.name) === passage.id">
                      Passage {{ passage.id }}
                    </option>
              </select>
            </ng-container>
             
        </li>
      </ul>

      <!-- <ul>
        <li *ngFor="let region of regions(); let i = index">
          <strong>{{ region.name }}</strong>
          <select id="passageSelect" (change)="onPassageChange($event, region.name)">
            <option value="0" [selected]="!selectedPassageMap.has(region.name)">ğŸ”¹ Passage SeÃ§iniz</option>
            <option *ngFor="let passage of passages()" [value]="passage.id" [selected]="selectedPassageMap.get(region.name) === passage.id">
              Passage {{ passage.id }}
            </option>
          </select>
                
        </li>
      </ul> -->
    </div>
  </div>
  