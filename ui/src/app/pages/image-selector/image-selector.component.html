<div class="container" [ngClass]="selectionMode()">
  <div class="form-container">
    <div class="form-column-4" style="border: var(--border-input);">
      <div *ngIf="imageSrc()" >
        <canvas #canvas (mousedown)="startSelection($event)" (click)="tapCorrectAnswer($event)" 
        (mousemove)="onMouseMove($event)" (mouseup)="endSelection($event)"></canvas>
      </div>
    </div>
    <div class="form-column">
    <input type="file" (change)="handleFilesInput2($event)" multiple accept="image/*">
    {{this.imagName()}}
    <div class="button-group-vertical">
      
      <div class="button-row">
        <button mat-raised-button color="primary" (click)="toggleSelectionMode('question')">Soru SeÃ§</button>
        <button mat-raised-button color="primary" (click)="toggleSelectionMode('passage')">ğŸ“œ Passage SeÃ§</button>
      </div>
      <div class="button-row">
        <button mat-raised-button color="primary" (click)="toggleOnlyQuestionMode()">{{onlyQuestionMode() ? 'Soru-Cevap Modu' : 'Soru Modu'}}</button>
        <!-- <button mat-raised-button color="primary" (click)="lockSelectionMode('answer')">Disable Modes</button> -->
        <button mat-raised-button color="primary" (click)="lockSelectionMode(null)">Disable Modes</button>
        <!-- <button mat-raised-button color="primary" (click)="toggleSelectionMode('answer')" [disabled]="regions().length === 0">ÅÄ±k SeÃ§</button> -->
        <button mat-raised-button color="primary" (click)="downloadRegionsLite()" [disabled]="regions().length === 0">KoordinatlarÄ± Ä°ndir</button>
      </div>
      <div class="button-row">
        <mat-slide-toggle
          class="example-margin" [checked]="autoAlign()" (change)="autoAlign.set($event.checked)">
          Hizalama
        </mat-slide-toggle>
        <!-- <button mat-raised-button color="primary" (click)="toggleAlignMode()">HizalamayÄ± {{!autoAlign() ? 'AÃ§' : 'Kapat'}}</button> -->
      </div>
      <div class="button-row">
        <button mat-raised-button color="primary" (click)="predict()">Predict</button>
        <button mat-raised-button color="primary" (click)="sendToFix()">Sent To Fix</button>
      </div>
      <div class="button-row">
        <button mat-raised-button color="primary" (click)="previousImage()">â® Ã–nceki</button>
        <!-- <button mat-raised-button color="primary" (click)="toggleAutoMode()">{{autoMode() ? 'Manuel' : 'Auto'}}</button> -->
        <mat-slide-toggle
          class="example-margin" [checked]="autoMode()" (change)="autoMode.set($event.checked)">
          Auto
        </mat-slide-toggle>
        <button mat-raised-button color="primary" (click)="nextImage()" [disabled]="inProgress()">Sonraki â¯</button>
      </div>
    </div>
    
   
    <!-- <button mat-raised-button color="primary" (click)="sendToFixForAnswer()">Sent To Fix For Answer</button> -->
   
    
   
    
  
    <div class="regions-list">
      <h3>SeÃ§ilen BÃ¶lgeler:</h3>
      <ul class="regions">
        <li *ngFor="let region of regions(); let i = index">
          
          <!-- <quill-editor *ngIf="isExample(region.name)" [ngModel]="exampleAnswers.get(region.name)" (ngModelChange)="onTextChanged(region.name, $event)">
          </quill-editor> -->
          <ul *ngIf="!onlyQuestionMode()">
            <li class="flex-no-wrap border-none" *ngFor="let answer of region.answers; let j = index">              
              <button class="choice-btn" (click)="setCorrectAnswer(i, j)">
                {{ answer.label }}  {{ answer.isCorrect ? "âœ…" : "" }}
              </button>          
              <button (click)="removeAnswer(i, j)">âŒ</button>
            </li>
          </ul>
            <ul>
              <li class="flex-no-wrap border-none">
            <button  (click)="removeQuestion(i)">âŒ Soru Sil</button>
              </li>
              <li class="flex-no-wrap border-none">
                <button (click)="selectQuestion(i)" [disabled]="isExample(region.name)">ÅÄ±k SeÃ§</button>
              </li>
              <li class="flex-no-wrap border-none">
                <button (click)="alignAnswers(i)" [disabled]="region.answers.length < 2">ğŸ”„ Hizala</button>
                </li >
              <li class="flex-no-wrap border-none">
                <select id="passageSelect" class="passage-select" (change)="onPassageChange($event, region.name)">
                  <option value="0" [selected]="!selectedPassageMap.has(region.name)">Passage SeÃ§iniz</option>
                  <option *ngFor="let passage of passages()" [value]="passage.id" [selected]="selectedPassageMap.get(region.name) === passage.id">
                    Passage {{ passage.id }}
                  </option>
            </select>
              </li>
            </ul>
             
        </li>
      </ul>

      <!-- <ul>
        <li *ngFor="let region of regions(); let i = index">
          <strong>{{ region.name }}</strong>
          <select id="passageSelect" (change)="onPassageChange($event, region.name)">
            <option value="0" [selected]="!selectedPassageMap.has(region.name)">ğŸ”¹ Passage SeÃ§iniz</option>
            <option *ngFor="let passage of passages()" [value]="passage.id" [selected]="selectedPassageMap.get(region.name) === passage.id">
              Passage {{ passage.id }}
            </option>
          </select>
                
        </li>
      </ul> -->
    </div>
    </div>
  </div>


    
  </div>
  