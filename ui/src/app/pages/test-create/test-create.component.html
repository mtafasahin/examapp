
<div class="form-container">
  <div class="form-column">
    <mat-card class="test-create-card">
        <mat-card-title>Yeni Test Olu≈ütur</mat-card-title>
        <mat-card-content>
          <form [formGroup]="testForm" (ngSubmit)="onSubmit()">

            <!-- Sƒ±nƒ±f Se√ßimi -->
            <mat-form-field appearance="outline">
              <mat-label>Kitap</mat-label>
              <mat-select formControlName="bookId" required (selectionChange)="onBookChange($event.value)">
                @for ( book of books ; track book.id ) {
                  <mat-option [value]="book.id">
                    {{ book.name }}
                  </mat-option>
                }
              </mat-select>
            </mat-form-field>

            <!-- üü¢ Kitap Testi -->
            <mat-form-field appearance="outline">
              <mat-label>Kitap Testi</mat-label>
              <mat-select formControlName="bookTestId" required>
                @for ( bt of bookTests ; track bt.id ) {
                  <mat-option [value]="bt.id">
                    {{ bt.name }}
                  </mat-option>
                }
              </mat-select>
            </mat-form-field>

          
            <!-- üü¢ Soru Resmi -->
            <label for="testImage">Soru Resmi</label>
            <input type="file" id="testImage" (change)="onImageUploadForTest($event)" />
            @if (testForm.value.imageUrl) {
              <img [src]="testForm.value.imageUrl" class="preview-image" />
            }

            <!-- Test Adƒ± -->
            <mat-form-field appearance="outline">
              <mat-label>Test Adƒ±</mat-label>
              <input matInput formControlName="name" required />
            </mat-form-field>

            
      
            <!-- Test A√ßƒ±klamasƒ± -->
            <mat-form-field appearance="outline">
              <mat-label>A√ßƒ±klama</mat-label>
              <textarea matInput formControlName="description"></textarea>
            </mat-form-field>

            <!-- Test A√ßƒ±klamasƒ± -->
            <mat-form-field appearance="outline">
              <mat-label>Alt ƒ∞sim</mat-label>
              <input matInput formControlName="subtitle" required />
            </mat-form-field>
      
            <!-- Sƒ±nƒ±f Se√ßimi -->
            <mat-form-field appearance="outline">
              <mat-label>Sƒ±nƒ±f</mat-label>
              <mat-select formControlName="gradeId" required>
                @for (grade of grades; track grade.id) {
                  <mat-option [value]="grade.id">
                    {{ grade.name }}
                  </mat-option>
                }
              </mat-select>
            </mat-form-field>
      
            <!-- S√ºre Se√ßimi -->
            <mat-form-field appearance="outline">
              <mat-label>Test S√ºresi (Dakika)</mat-label>
              <input matInput type="number" formControlName="maxDurationMinutes" min="1" />
            </mat-form-field>
      
            <!-- √áalƒ±≈üma Testi Mi? -->
            <mat-checkbox formControlName="isPracticeTest">Bu bir √ßalƒ±≈üma testi mi?</mat-checkbox>
      
            <!-- Butonlar -->
            <div class="button-group">
              <button mat-raised-button color="primary" type="submit" [disabled]="testForm.invalid">Kaydet</button>
              <button mat-raised-button color="warn" type="button" (click)="navigateToTestList()">ƒ∞ptal</button>
            </div>
      
          </form>
        </mat-card-content>
      </mat-card>
  </div>
  <div class="form-column">
    <h2>Kart √ñn ƒ∞zleme</h2>
    <app-worksheet-card [color]="'red'" [test]="testForm.value"> </app-worksheet-card>
    <div class="list-container">
      <div class="search-results">
        <ul class="course-list">
          <li class="course-item">
            <div class="course-info">
              <h3>
                {{ testForm.value.name }}
                <span class="new-badge">NEW & POPULAR</span>
                <span class="new-badge"><strong> 0 Soru</strong></span>
                <span class="new-badge"><strong> {{ testForm.value.gradeId }}.Sƒ±nƒ±f</strong></span>
                <span class="new-badge"><strong> ‚≠ê  {{ 4.8 }}</strong></span>
                <span class="new-badge"><strong>{{ testForm.value.maxDurationMinutes }} dakika</strong></span>
              </h3>
              <span>{{ testForm.value.subtitle }}</span>
              <p>{{ testForm.value.description }}</p>
            </div>
          </li>
        </ul>
      </div>
    </div>
    
  </div>
</div>