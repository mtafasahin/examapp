
<div class="form-container">
  <div class="form-column">
    <mat-card class="test-create-card">
        <mat-card-title>Yeni Test OluÅŸtur</mat-card-title>
        <mat-card-content>
          <form [formGroup]="testForm" (ngSubmit)="onSubmit()">


            <!-- SÄ±nÄ±f SeÃ§imi -->
            <mat-form-field appearance="outline">
              <mat-label>Kitap</mat-label>
              <mat-select formControlName="bookId" required (selectionChange)="onBookChange($event.value)">
                @for ( book of books ; track book.id ) {
                  <mat-option [value]="book.id">
                    {{ book.name }}
                  </mat-option>
                }
              </mat-select>
            </mat-form-field>

            <!-- ðŸŸ¢ Kitap Testi -->
            <mat-form-field appearance="outline">
              <mat-label>Kitap Testi</mat-label>
              <mat-select formControlName="bookTestId" required>
                @for ( bt of bookTests ; track bt.id ) {
                  <mat-option [value]="bt.id">
                    {{ bt.name }}
                  </mat-option>
                }
              </mat-select>
            </mat-form-field>

          
            <!-- ðŸŸ¢ Soru Resmi -->
            <label for="testImage">Soru Resmi</label>
            <input type="file" id="testImage" (change)="onImageUploadForTest($event)" />
            @if (testForm.value.imageUrl) {
              <img [src]="testForm.value.imageUrl" class="preview-image" />
            }

            <!-- Test AdÄ± -->
            <mat-form-field appearance="outline">
              <mat-label>Test AdÄ±</mat-label>
              <input matInput formControlName="name" required />
            </mat-form-field>

            
      
            <!-- Test AÃ§Ä±klamasÄ± -->
            <mat-form-field appearance="outline">
              <mat-label>AÃ§Ä±klama</mat-label>
              <textarea matInput formControlName="description"></textarea>
            </mat-form-field>

            <!-- Test AÃ§Ä±klamasÄ± -->
            <mat-form-field appearance="outline">
              <mat-label>Alt Ä°sim</mat-label>
              <input matInput formControlName="subtitle" required />
            </mat-form-field>
      
            <!-- SÄ±nÄ±f SeÃ§imi -->
            <mat-form-field appearance="outline">
              <mat-label>SÄ±nÄ±f</mat-label>
              <mat-select formControlName="gradeId" required>
                @for (grade of grades; track grade.id) {
                  <mat-option [value]="grade.id">
                    {{ grade.name }}
                  </mat-option>
                }
              </mat-select>
            </mat-form-field>
      
            <!-- SÃ¼re SeÃ§imi -->
            <mat-form-field appearance="outline">
              <mat-label>Test SÃ¼resi (Dakika)</mat-label>
              <input matInput type="number" formControlName="maxDurationMinutes" min="1" />
            </mat-form-field>
      
            <!-- Ã‡alÄ±ÅŸma Testi Mi? -->
            <mat-checkbox formControlName="isPracticeTest">Bu bir Ã§alÄ±ÅŸma testi mi?</mat-checkbox>
      
            <!-- Butonlar -->
            <div class="button-group">
              <button mat-raised-button color="primary" type="submit" [disabled]="testForm.invalid">Kaydet</button>
              <button mat-raised-button color="warn" type="button" (click)="navigateToTestList()">Ä°ptal</button>
            </div>
      
          </form>
        </mat-card-content>
      </mat-card>
  </div>
  <div class="form-column">
    <h2>Kart Ã–n Ä°zleme</h2>
    <app-worksheet-card [color]="'red'" [test]="testForm.value"> </app-worksheet-card>
  </div>
</div>